<div class="alert-danger syft-exception-repr-html">
    <span id="caret-{{html_id}}" class="syft-exception-caret"
        onclick="toggleDropdown('{{html_id}}', 'caret-{{html_id}}')">
        {% if display == "none" %}
        &#9654;
        {% else %}
        &#9660;
        {% endif %}
    </span>
    <strong>{{name}}</strong>:
    <pre class="alert-danger syft-exception-message">{{message | escape}}</pre>
</div>
<div id="{{html_id}}" class="syft-exception-dropdown" style="display: {{display}};">
    {% if server_trace%}
    <div> <strong>Server Trace:</strong> </div>
    <pre class="syft-exception-trace">{{server_trace | escape}}</pre>
    {% endif %}
    <br>
    <br>
    <div> <strong>Client Trace:</strong> </div>
    <pre class="syft-exception-trace">{{traceback_str | escape}}</pre>
</div>

<script>
    function toggleDropdown(dropdownId, caretId) {
        var dropdown = document.getElementById(dropdownId);
        var caret = document.getElementById(caretId);
        if (dropdown.style.display === "none") {
            dropdown.style.display = "block";
            caret.innerHTML = "&#9660;";
        } else {
            dropdown.style.display = "none";
            caret.innerHTML = "&#9654;";
        }
    }
</script>

<style>
    .syft-exception-repr-html {
        padding: 5px;
        position: relative;
    }

    .syft-exception-caret {
        cursor: pointer;
    }

    .syft-exception-message {
        display: inline;
        font-family: inherit;
    }

    .syft-exception-dropdown {
        margin-top: 5px;
        padding: 10px;
        border-top: 1px solid #ccc;
    }

    .syft-exception-trace {
        display: inline;
    }
</style>